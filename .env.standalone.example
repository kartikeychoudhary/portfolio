# ============================================
# Portfolio Application - Standalone Docker Configuration
# For use with external MySQL database
# ============================================
# Copy this file to .env and customize values
# DO NOT commit .env to version control
# ============================================

# ============================================
# REQUIRED: External Database Configuration
# ============================================
# Your existing MySQL 8.0+ server details
DB_HOST=your-mysql-host.com
DB_PORT=3306
DB_NAME=portfolio_db
DB_USER=your-db-user
DB_PASSWORD=your-db-password
DB_USE_SSL=false

# ============================================
# REQUIRED: JWT Configuration
# ============================================
# Generate a secure secret for production using:
# openssl rand -base64 32
JWT_SECRET=your-secure-jwt-secret-minimum-32-characters-long
JWT_EXPIRATION=3600000

# Backend Configuration
# ---------------------
BACKEND_PORT=8080

# CORS Configuration
# Add all domains that should be allowed to access the API
# Separate multiple origins with commas (no spaces)
CORS_ALLOWED_ORIGINS=http://localhost:80,https://yourdomain.com

# Application Settings
# --------------------
ALLOW_SIGNUPS=false

# Logging Configuration
# ---------------------
LOG_LEVEL=INFO
SECURITY_LOG_LEVEL=INFO
JPA_SHOW_SQL=false
JPA_FORMAT_SQL=false

# Frontend Configuration
# ----------------------
FRONTEND_PORT=80

# ============================================
# IMPORTANT: Prerequisites
# ============================================
# Before starting the application, ensure:
#
# 1. Database exists:
#    CREATE DATABASE portfolio_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
#
# 2. User has proper permissions:
#    CREATE USER 'your-db-user'@'%' IDENTIFIED BY 'your-db-password';
#    GRANT ALL PRIVILEGES ON portfolio_db.* TO 'your-db-user'@'%';
#    FLUSH PRIVILEGES;
#
# 3. Database is accessible from Docker containers
#    - If MySQL is on localhost, use host.docker.internal as DB_HOST
#    - If MySQL is remote, ensure firewall allows connections
#    - Test connection: mysql -h DB_HOST -u DB_USER -p
#
# 4. MySQL version is 8.0 or higher
#
# 5. Flyway will automatically:
#    - Create all necessary tables
#    - Run migrations
#    - Seed initial data (admin user)
# ============================================

# ============================================
# Default Credentials (After First Startup)
# ============================================
# Username: admin
# Password: admin
#
# IMPORTANT: Change the admin password immediately after first login!
# ============================================

# Quick Start
# -----------
# 1. Prepare database (see prerequisites above)
# 2. Copy this file: cp .env.standalone.example .env
# 3. Edit .env with your database details and secure JWT secret
# 4. Start services: docker-compose -f docker-compose.standalone.yml up -d
# 5. View logs: docker-compose -f docker-compose.standalone.yml logs -f
# 6. Access application: http://localhost
# 7. Login with admin/admin and change password
#
# Management Commands
# -------------------
# Stop: docker-compose -f docker-compose.standalone.yml down
# Rebuild: docker-compose -f docker-compose.standalone.yml build
# Restart: docker-compose -f docker-compose.standalone.yml restart
#
# Troubleshooting
# ---------------
# If backend fails to connect to database:
# - Verify DB_HOST is accessible from Docker
# - For localhost MySQL, use: DB_HOST=host.docker.internal
# - Check MySQL user permissions
# - Ensure database exists
# - Check logs: docker-compose -f docker-compose.standalone.yml logs backend
